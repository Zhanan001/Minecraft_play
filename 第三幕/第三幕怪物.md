# **第三幕怪物规范文档**

---

## 🧩 **一、副本怪物：地脉核心**

### **1. 能量畸变体**

* **MythicMobs配置ID**：`Energy_Abomination`
* **基础属性**：
  * 生命值：40
  * 伤害：4 + 静默1秒（能量球）
  * 护甲：5
  * 移动速度：0.28
  * 类型：`BLAZE`（烈焰人，资源包替换为紫色能量体）
* **核心技能**：
  1. **能量溅射**：每3秒发射一枚紫色能量球，命中后产生半径2格的范围伤害（伤害：3）并静默目标1秒。
  2. **不稳定核心**：死亡时，延迟1秒后爆炸，对半径3格内玩家造成6点伤害并击退。
* **AI与行为**：
  * 行为模式：`Aggressive`
  * 移动时会在地面留下短暂（3秒）的静默泥沼（紫色粒子效果）
  * 优先攻击正在交互管道阀门的玩家
* **刷新**：在地脉核心外层能量紊乱通道中自然生成，管道破裂时额外刷新2-3只。
* **掉落物**：
  * 静默碎片 x1-2（100%）
  * 纯净能量结晶 x1（30%）

---

### **2. 静默蠕虫幼体（Boss）**

* **MythicMobs配置ID**：`Silent_Wormling_Boss`
* **基础属性**：
  * 生命值：500（显示Boss血条）
  * 伤害：10-30（根据阶段变化）
  * 护甲：15
  * 移动速度：0.2（缓慢痛苦地移动）
  * 类型：`ENDERMAN`（末影人，资源包替换为半透明蠕虫模型）
  * 免疫击退和恐惧效果
* **阶段化技能脚本**：

#### **阶段一（100%-70%）**

* **技能：能量虹吸**
  * 每20秒，随机锁定一名玩家（头顶显示紫色光束标记）
  * 持续吸取玩家生命和经验（每秒3点伤害+10经验）
  * 持续时间：10秒，或被打断
  * **打断机制**：元术士使用"能量干扰"技能（右键引导3秒）可打断并眩晕Boss 3秒

#### **阶段二（70%-40%）**

* **获得新技能：静默领域**
  * 每15秒，在随机玩家位置生成半径3格的紫色半透明结界
  * 结界内玩家：职业技能禁用，符文物品无法使用，移动速度-50%
  * 结界持续时间：15秒，或被驱散
  * **驱散机制**：匠师向结界内投掷"共鸣炸弹"（任务物品），炸弹弹跳一次后爆炸驱散结界

#### **阶段三（40%-0%）**

* **获得终极技能：悲鸣**

  * 生命值降至10%时触发
  * Boss盘踞中央，身体剧烈膨胀，读条5秒
  * 读条期间，场地边缘刷新3根"上古符文柱"（发光的金合欢木桩实体）
  * **应对机制**：狩魂者必须在5秒内指挥宠物右键点击至少两根不同的符文柱
    * 每成功激活一根，为全队叠加一层"灵魂护盾"
    * 需至少两层护盾才能免疫秒杀
    * 激活过程中符文柱会吸引Boss的自动攻击
* **喊话文本**：

  * 进入战斗：`"嘶……痛……好饿……"`
  * 阶段一虹吸：`"给我……能量……"`
  * 阶段二结界：`"安静……下去……"`
  * 阶段三悲鸣：`"放我……出去……！"`
* **AI与行为**：

  * 始终保持对当前仇恨最高玩家的面向
  * 在40%和20%生命值时，会释放一次"痛苦尖啸"：击退周围8格内所有玩家并施加"虚弱II"10秒
  * 战斗场地为圆形大厅，Boss会尽量避免被逼到角落
* **死亡掉落**：

  * 蠕虫的记忆腺体 x1（100%，任务关键）
  * 纯净能量结晶 x5（100%）
  * 职业专属史诗符文 x1（100%，随机本职业）
  * 地脉核心碎片 x3-5（100%，用于制作A线建造材料）

---

## ⚙️ **二、A线专属怪物（封印派）**

### **1. 影蚀徘徊者**

* **MythicMobs配置ID**：`Shadow_Erosion_Lurker`
* **基础属性**：
  * 生命值：60
  * 伤害：6 + 凋零I（5秒）
  * 护甲：8
  * 移动速度：0.35
  * 类型：`ZOMBIE`（僵尸，资源包替换为模糊人形阴影）
* **核心技能**：
  1. **阴影突袭**：每10秒，瞬间移动到目标玩家背后，造成双倍伤害。
  2. **凋零触须**：攻击时有30%概率在地面生成黑色触须，束缚玩家2秒（无法移动）。
  3. **建筑破坏者**：对建筑模板方块的伤害提升300%。
* **AI与行为**：
  * 行为模式：`Aggressive`，优先攻击建筑模板方块
  * 在夜晚或阴天获得"暗影庇护"：移动速度+20%，伤害+10%
  * 死亡时身体化为黑烟消散
* **刷新**：
  * 在增幅塔建造区域周期性生成
  * 当塔基血量低于50%时，生成数量翻倍
  * 最大同时存在数量：12
* **掉落物**：
  * 影蚀碎片 x1-2（100%，A线建造材料）
  * 凋零玫瑰 x1（15%）

---

### **2. 构装体破坏者**

* **MythicMobs配置ID**：`Construct_Breaker`
* **基础属性**：
  * 生命值：120
  * 伤害：12（对玩家）/ 36（对建筑方块）
  * 护甲：20（高额减伤）
  * 移动速度：0.18（缓慢沉重）
  * 类型：`IRON_GOLEM`（铁傀儡，资源包替换为黑曜石机械）
* **核心技能**：
  1. **重击**：每3次普通攻击后，下一次攻击造成200%伤害并击飞目标。
  2. **震荡波**：生命值每减少25%，释放一次环形震荡波（半径5格），造成8点伤害并击退。
  3. **过载核心**：死亡时自爆，对周围4格造成15点爆炸伤害。
* **弱点机制**：
  * 背部有发光的"能源核心"（红色粒子效果）
  * 攻击背部核心时：伤害×2，并有10%概率触发"瘫痪"（定身3秒）
* **AI与行为**：
  * 行为模式：`Aggressive`，无视玩家直接冲向最近的建筑模板
  * 被攻击时会短暂（2秒）转向攻击者，然后继续前往建筑目标
  * 移动路径上会留下裂缝粒子效果
* **刷新**：仅在塔基建造事件中生成，每个塔基事件最多生成2只
* **掉落物**：
  * 精密齿轮 x3-5（100%，A线建造材料）
  * 铁锭 x4-6（100%）
  * 黑曜石碎片 x2-4（50%）

---

### **3. 熵灵幻影（精英）**

* **MythicMobs配置ID**：`Entropy_Phantom_Elite`
* **基础属性**：
  * 生命值：200
  * 伤害：8 + 引导打断
  * 护甲：12
  * 移动速度：0.45（快速飘忽）
  * 类型：`PHANTOM`（幻翼，资源包替换为暗红色半透明人形）
* **核心技能**：
  1. **绝望光环**：
     * 被动技能，周围8格内所有玩家获得debuff"绝望"：引导/施法速度-50%，移动速度-20%
     * 光环效果可叠加，最多2层（多个幻影接近时）
  2. **心灵尖啸**：
     * 每15秒释放，打断周围10格内所有玩家的施法/引导动作
     * 并施加"沉默"效果3秒（禁用所有技能）
  3. **暗影瞬移**：
     * 生命值低于30%时激活
     * 每5秒随机瞬移到15格内任意位置
     * 瞬移后3秒内闪避率+50%
* **AI与行为**：
  * 行为模式：`Aggressive`，优先攻击正在进行引导仪式的玩家
  * 会刻意保持在多个玩家中间，最大化光环效果
  * 死亡时发出刺耳尖啸，并释放最后一道绝望冲击波（半径10格，造成5点伤害）
* **刷新**：仅在最终注能事件中出现，每个增幅塔区域生成1-2只
* **战术提示**：
  * 必须优先集火击杀，否则引导事件几乎无法完成
  * 建议分配专门的小队处理幻影
* **掉落物**：
  * 熵灵残响 x1（100%，用于合成高级附魔）
  * 金色符文石 x2-3（100%）
  * 虚空结晶 x1（25%，稀有材料）

---

## ⚔️ **三、B线专属怪物（净化派）**

### **1. 疯狂衍生物**

* **MythicMobs配置ID**：`Madness_Derivative`
* **基础属性**：
  * 生命值：30
  * 伤害：5（随机攻击模式）
  * 护甲：3
  * 移动速度：0.5（快速且不规则移动）
  * 类型：多种基础生物变种（狼、猪、鸡等，使用不同配置）
* **核心技能**：
  1. **能量爆裂**：
     * 死亡时有50%概率爆炸，对半径3格造成8点伤害
     * 爆炸后留下"疯狂残渣"区域（紫色粒子，踏入者获得反胃效果）
  2. **疯狂撕咬**：
     * 连续快速攻击3次，每次间隔0.5秒
     * 第三次攻击额外附加"混乱"效果（随机传送目标2格）
  3. **分裂增殖**：
     * 生命值降至10%时，有30%概率分裂为两个"小型衍生物"（生命值10，伤害2）
* **AI与行为**：
  * 行为模式：`Aggressive`，但移动路径完全随机（无规律）
  * 攻击目标频繁切换，难以建立稳定仇恨
  * 会主动避开"净化火炬"的光照范围
* **刷新**：
  * 在野外蠕虫巢穴周围50格内自然生成
  * 当玩家携带"蠕虫安抚合剂"时，生成概率+50%
  * 最大同时存在数量：8（单个巢穴区域）
* **掉落物**：
  * 疯狂能量残渣 x1（100%，任务物品）
  * 对应生物的基础掉落（生肉、羽毛等）
  * 净化孢子 x1-2（15%，B线任务材料）

---

### **2. 腐化触须**

* **MythicMobs配置ID**：`Corrupted_Tentacle`
* **基础属性**：
  * 生命值：50
  * 伤害：7 + 中毒I
  * 护甲：8
  * 移动速度：0（固定位置）
  * 类型：`COD`（鳕鱼，资源包替换为紫色肉质触手）
* **核心技能**：
  1. **鞭笞**：
     * 对前方120度、5格扇形区域进行攻击
     * 造成伤害并施加中毒I（5秒）
     * 攻击间隔：2秒
  2. **毒云爆发**：
     * 死亡时在自身位置生成半径2格的毒云区域
     * 毒云持续10秒，踏入者获得：中毒II + 缓慢I
  3. **再生能力**：
     * 如果30秒内未被完全击杀，会缓慢回复生命（每秒回复2点）
* **AI与行为**：
  * 行为模式：`Neutral`，只攻击进入攻击范围的玩家
  * 固定位置生成，通常附着在墙壁、天花板或地面
  * 当附近有"疯狂蠕虫个体"时，获得"狂暴"buff：攻击速度+50%
* **刷新**：仅在虫巢净化副本中生成，每个副本生成3-5只
* **战术提示**：
  * 建议远程清除，避免近战被毒云影响
  * 快速击杀防止再生
* **掉落物**：
  * 触须样本 x1（100%，用于制作安抚合剂）
  * 毒囊 x1-2（60%）
  * 紫色染料 x1（25%）

---

### **3. 封印派维稳部队（NPC敌对）**

* **MythicMobs配置ID**：`Sealist_Peacekeeper_Squad`
* **实现方式**：使用Citizens2 NPC + Denizen脚本控制，非MythicMobs怪物
* **小队配置**（每组3-4个NPC）：

  1. **盾卫（坦克）**

     * 生命值：80
     * 伤害：6
     * 技能：盾牌格挡（正面伤害减免80%）、嘲讽（强制攻击自己3秒）
  2. **剑士（近战输出）**

     * 生命值：60
     * 伤害：10
     * 技能：连续斩击（快速攻击3次）、冲锋（突进攻击）
  3. **弓箭手（远程输出）**

     * 生命值：50
     * 伤害：8（远程）
     * 技能：精准射击（100%命中）、箭雨（范围攻击）
  4. **牧师（治疗/辅助，精英小队才有）**

     * 生命值：40
     * 伤害：3
     * 技能：治疗术（恢复队友生命）、净化（驱散B线玩家的buff）
* **AI与行为**：

  * 行为模式：`Aggressive`，但战术性很强
  * 会使用基础战术：盾卫在前，剑士侧翼，弓箭手后排
  * 优先攻击携带任务物品的玩家（检测背包）
  * 当小队成员死亡时，剩余成员获得"愤怒"buff：伤害+20%
  * 会巡逻预设路线，发现敌对玩家后追击（最大追击距离：50格）
* **刷新区域**：

  * 世界中被标记为"镇压区"的特定区域
  * 主要道路和资源点附近
  * B线玩家净化巢穴的必经之路上
* **掉落物**：

  * 维稳徽章 x1（100%，可兑换B线声望）
  * 对应的装备（耐久损耗，可维修）
  * 急救包 x1（25%，使用后恢复20点生命）
* **战术提示**：

  * 优先击杀治疗者（牧师）
  * 利用环境（高地、掩体）对抗弓箭手
  * 控制技能对盾卫效果较差

---

### **4. 攻城器械（环境威胁）**

* **实现方式**：自定义实体 + 红石机关，非传统怪物
* **类型一：弩炮**

  * **生命值**：100（可被攻击破坏）
  * **攻击方式**：
    * 每3秒发射一支重型弩箭
    * 弩箭造成12点穿透伤害（无视50%护甲）
    * 攻击范围：直线40格
  * **弱点**：侧面和背面装甲薄弱（受到伤害×2）
  * **破坏奖励**：精密零件 x3，钢锭 x5
* **类型二：投石车**

  * **生命值**：120
  * **攻击方式**：
    * 每5秒投掷一枚燃烧弹
    * 落地点生成半径3格的火焰区域（持续15秒）
    * 火焰区域：每秒3点伤害，并施加燃烧效果
  * **特殊机制**：
    * 可被匠师使用"拆卸工具"快速破坏（时间：10秒）
    * 拆卸过程会被打断，需要队友保护
  * **破坏奖励**：燃烧弹残骸 x2，机械核心 x1
* **刷新条件**：

  * 在最终防守战中由封印派部署
  * 通常位于高地上，有NPC部队保护
  * 摧毁后可获得大量"决战准备度"贡献

---

## 📊 **四、怪物属性总表**


| 怪物名称     | 生命值      | 基础伤害 | 护甲值 | 移动速度 | 威胁等级 | 建议应对人数 |
| ------------ | ----------- | -------- | ------ | -------- | -------- | ------------ |
| 能量畸变体   | 40          | 4+静默   | 5      | 0.28     | 低       | 1            |
| 静默蠕虫幼体 | 500         | 10-30    | 15     | 0.2      | 传奇     | 3-5小队      |
| 影蚀徘徊者   | 60          | 6+凋零   | 8      | 0.35     | 中       | 1-2          |
| 构装体破坏者 | 120         | 12/36    | 20     | 0.18     | 高       | 2-3          |
| 熵灵幻影     | 200         | 8+打断   | 12     | 0.45     | 精英     | 3-4          |
| 疯狂衍生物   | 30          | 5        | 3      | 0.5      | 低       | 1            |
| 腐化触须     | 50          | 7+中毒   | 8      | 0        | 中       | 1            |
| 维稳小队     | 80/60/50/40 | 6-10     | 15     | 0.3      | 中高     | 2-3          |

---

## 🧠 **五、插件配置建议**

### **MythicMobs核心配置要点**

```yaml
# 示例：静默蠕虫幼体阶段转换配置
Silent_Wormling_Boss:
  Type: ENDERMAN
  Display: '&5&l静默蠕虫幼体'
  Health: 500
  Damage: 10
  Skills:
  # 阶段一技能
  - skill:energy_siphon @trigger ~onTimer:1200 ~onSpawn
  # 血量触发器
  - skill:phase_transition_2 @self ~onDamaged{amount=150} ~chance=100
  - skill:phase_transition_3 @self ~onDamaged{amount=100} ~chance=100
  
energy_siphon:
  Skills:
  - target{type=randomplayer} @Self
  - effect:particle{particle=reddust;color=red;amount=50;speed=0} @target
  - damage{a=3;ot=damage_siphon} @target ~onTick
  - effect:takexp{a=10} @target ~onTick
  - delay 10
  # 可被打断
  - condition:interruptible @self
```

### **Citizens2 NPC配置**

```yaml
# 维稳部队小队生成脚本
peacekeeper_spawn:
  type: task
  debug: false
  script:
  - define location <[location]> # 预设巡逻点
  - npc create Sealist_Shield_Guard
  - npc create Sealist_Swordsman
  - npc create Sealist_Archer
  - foreach <server.list_npcs>:
    - adjust <npc>:
        equip: iron_sword|iron_chestplate|etc...
        behavior: aggressive
        faction: sealist_faction
        patrol:
          points:
          - <[location]>
          - <[location].add[20,0,0]>
          - <[location].add[20,0,20]>
          loop: true
```

### **刷新控制机制**

1. **基于事件进度的动态刷新**

   - 使用`PlaceholderAPI`读取世界事件进度
   - 事件进度越高，怪物刷新率/强度越高
2. **玩家数量平衡**

   - 区域内玩家越多，怪物数量/生命值按比例增加
   - 避免单人玩家面对过多怪物
3. **时间控制**

   - 夜晚/特殊天气时，影蚀类怪物刷新率+50%
   - 白天/晴朗天气时，净化类事件效率+20%

---

## ✅ **六、测试与平衡要点**

### **测试重点**

1. **Boss战机制测试**

   - 各阶段转换是否平滑
   - 打断/驱散机制响应时间是否合理
   - 多队伍协作时，场地是否足够
2. **阵营平衡测试**

   - A线建造事件：怪物强度 vs 玩家建造速度
   - B线净化事件：NPC干扰强度 vs 玩家净化速度
   - 确保双线任务完成时间相近
3. **性能测试**

   - 同时存在怪物上限：不超过50只（全服）
   - 粒子效果密度控制：避免使用持续高密度粒子
   - NPC寻路优化：限制同时活动的NPC数量

### **平衡调整参数**

```yaml
# 可调整的平衡参数（config.yml）
monster_balance:
  # 难度随玩家等级调整
  dynamic_difficulty: true
  player_level_multiplier: 0.05 # 每级增加5%怪物属性
  
  # 刷新控制
  max_monsters_per_region: 15
  respawn_cooldown: 120 # 秒
  
  # 事件相关
  event_monster_buff: 1.3 # 事件期间怪物强度倍率
  night_spawn_bonus: 1.5 # 夜晚刷新倍率
```

---

**注意**：本规范为第三幕核心怪物设计，实际配置时需结合具体插件版本和服务器性能进行调整。建议先在测试服验证所有机制，确保稳定性和平衡性后再部署到正式服。
