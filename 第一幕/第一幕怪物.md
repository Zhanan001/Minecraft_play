# 《迷雾初开》第一幕怪物实现策划

## 一、总体设计原则

- **贴合世界观**：所有怪物设计需符合“静默”侵蚀、能量畸变的世界观设定
- **渐进式难度**：随游戏进程逐步提升怪物强度和复杂度
- **生态合理性**：怪物行为、生成与环境、时间、事件挂钩
- **玩法多样性**：不同怪物需提供差异化的战斗体验和应对策略

---

## 二、怪物详细设计

### 1. 畸变蝙蝠 (Aberrant Bat)

- **出现时间**：第1天夜晚开始
- **生成条件**：
  - 游戏内时间夜晚（≥13000 tick）
  - 在玩家营地光照范围外（光照等级≤7）
  - Y轴高度40-70（河谷区域）
- **基础属性**：
  - 生命值：12 ❤️
  - 攻击力：3 ❤️（普通攻击）
  - 护甲：0
  - 移动速度：比普通蝙蝠快30%
  - 特殊：飞行生物，可攀爬
- **行为模式**：
  - **被动状态**：在黑暗中盘旋，发出微弱吱吱声
  - **激活条件**：检测到玩家或光源（火把、篝火等）进入20格范围
  - **攻击行为**：
    1. 俯冲攻击：直线冲向目标，造成伤害
    2. 吸血：攻击命中后有30%概率附加“腐化毒素”效果
- **特殊效果**：
  - **腐化毒素**（持续15秒）：
    - 每3秒造成1 ❤️伤害
    - 屏幕边缘泛紫，轻微扭曲
    - 死亡后有10%概率掉落“腐化腺体”（任务物品）
- **掉落物品**：
  - 皮革（1-2，80%概率）
  - 变异的翼膜（1，50%概率，任务物品）
  - 腐化腺体（1，10%概率，可制作解毒剂）

### 2. 徘徊的阴影 (Lurking Shade)

- **出现时间**：第4天及以后，灰寂森林开放后
- **生成条件**：
  - 灰寂森林生物群系
  - 光照等级≤5
  - 远离玩家开辟的小径（特定坐标范围外）
  - 地面有薄雾粒子效果区域
- **基础属性**：
  - 生命值：20 ❤️
  - 攻击力：2 ❤️（接触伤害）
  - 护甲：5（对物理攻击有减伤）
  - 移动速度：慢（正常速度的70%）
  - 特殊：半透明实体，部分穿透方块
- **行为模式**：
  - **中立生物**：不主动攻击
  - **跟踪行为**：
    1. 发现玩家（15格内）后开始缓慢跟随
    2. 跟随距离：5-15格
    3. 移动路径：可穿过滤光性方块（树叶、藤蔓等）
  - **低语机制**：
    - 每10-20秒播放一次低语音频（随机台词）：
      - “好饿……”
      - “冷……”
      - “留下……”
      - “光……讨厌……”
    - 低语时玩家获得“心神不宁”效果（挖掘速度-10%，持续8秒）
- **特殊机制**：
  - **畏光性**：
    - 光照等级≥12时，每秒受到2 ❤️伤害
    - 符文火把5格内：移动速度降至30%，每2秒受到1 ❤️伤害
  - **能量吸引**：
    - 对持有微光符文石的玩家跟随优先级+50%
    - 被能量技能攻击时获得“狂暴”效果（速度+50%，攻击+3，持续10秒）
- **死亡效果**：
  - 化为黑烟粒子消散
  - 不产生经验球
- **掉落物品**：
  - 暗影尘埃（1-3，100%概率，合成材料）
  - 破碎的记忆碎片（1，15%概率，可兑换剧情线索）

### 3. 能量畸变体 (Energy Aberration) - BOSS

- **出现时间**：第12-14天世界事件
- **生成条件**：
  - 世界事件触发后，在指定坐标生成
  - 需要至少3名玩家在100格范围内才会完全激活
- **基础属性**：
  - 生命值：400 ❤️（显示为百分比血条）
  - 攻击力：8-15 ❤️（根据不同技能）
  - 护甲：15（常驻）
  - 体型：大型（3x3x3格）
  - 特殊：漂浮，免疫击退
- **阶段化战斗设计**：

#### 阶段一：能量汲取（100%-60%）

- **外观**：紫色半透明能量体，核心剧烈脉动
- **常规攻击**：
  1. 能量冲击波（每5秒）：
     - 以BOSS为中心释放环形紫色粒子波
     - 半径12格
     - 伤害：8 ❤️
     - 躲避方式：跳跃（冲击波高度1.5格）
  2. 能量飞弹（随机目标）：
     - 锁定一个玩家发射3枚跟踪飞弹
     - 每发伤害：5 ❤️
     - 可被近战攻击打散
- **台词触发**：
  - 进入战斗：“更……多……能量……饥饿……”
  - 释放冲击波前1秒：“汇聚……释放！”
  - 生命值每下降10%：“不够……还不够……”

#### 阶段二：静默连接（60%-30%）

- **外观变化**：核心变为黑色，表面出现裂纹
- **新增机制**：经验抽取
  1. 每20秒随机选择一名玩家（最远距离优先）
  2. 被锁定玩家：
     - 头顶出现紫色光束特效
     - 每秒损失2级经验
     - 移动速度降低30%
     - 屏幕显示：“能量正在被抽离！”
  3. 切断方式：
     - 被锁玩家移动至距离BOSS 30格外
     - 其他玩家攻击BOSS核心（伤害+50%）
     - 持续时间15秒，结束后BOSS恢复10%生命值
- **新增技能**：阴影召唤
  - 召唤2-4只“虚弱的阴影”（生命值减半的徘徊的阴影）
  - 优先攻击被经验抽取的玩家

#### 阶段三：不稳定崩解（30%-0%）

- **外观变化**：剧烈闪烁，粒子喷射
- **分裂机制**（进入阶段时触发）：
  1. BOSS爆炸，分裂为3个“能量浮灵”
  2. 每个浮灵属性：
     - 生命值：80 ❤️
     - 攻击力：4 ❤️（快速近战）
     - 特殊：死亡后10秒内如果没有全部击杀，剩余浮灵会融合重生（恢复20%生命值）
- **狂暴机制**：
  - 攻击速度+100%
  - 移动速度+50%
  - 每5秒释放一次全屏能量脉冲（伤害6 ❤️，无法躲避）
- **台词**：
  - 分裂时：“不……稳定……崩解！”
  - 浮灵生成：“碎片……重组……”
  - 最后10%生命值：“静默……终将……吞噬……”

#### 击杀奖励机制：

1. **全员奖励**：
   - 大量经验（全队平分）
   - 称号：“河谷守护者”（持续到第二幕结束）
   - 世界事件完成记录
2. **宝箱掉落**：
   - 位置：BOSS死亡处生成“纯净能量宝箱”（需右键开启）
   - 开启条件：参与战斗的玩家（对BOSS造成过伤害）
   - 掉落物品（每人独立随机）：
     - 职业专属绿色符文（100%）
     - Towny创建折扣券（50%）
     - 稀有材料“纯净能量核心”（25%）
     - 装饰品“畸变残骸”（10%）

---

## 三、怪物生成控制系统

### 1. 动态生成调节

- **基于在线人数**：每增加10名在线玩家，怪物生成率+5%
- **基于时间进度**：随游戏天数增加，怪物强度每周提升10%
- **基于事件状态**：方尖碑脉动期间，畸变生物生成率+30%

### 2. 区域控制

```yaml
河谷安全区:
  范围: 以中央篝火为中心半径50格
  怪物生成: 完全禁止（夜晚畸变蝙蝠除外）
  
灰寂森林:
  常规区域: 正常生成
  小径区域: 生成率-70%
  能量裂隙附近: 生成率+200%（事件期间）
```

### 3. 刷新机制

- **畸变蝙蝠**：夜晚每小时刷新一批（5-8只）
- **徘徊的阴影**：玩家离开区域后10分钟刷新
- **能量畸变体**：世界事件期间唯一存在，死亡后本周期不再刷新

---

## 四、技术实现要点

### 1. 自定义实体

- 使用Custom Mob插件或编写自定义模型
- 特殊粒子效果：紫色能量流、黑烟消散、低语音频提示
- 血条显示：BOSS使用BossBar API，普通怪物使用悬浮文字

### 2. AI行为

- 路径寻找：避开光源区域（阴影怪物）
- 仇恨系统：优先攻击最近光源持有者/低血量玩家
- 技能冷却：使用计时器控制技能释放间隔

### 3. 数据存储

- 记录每个玩家对各种怪物的击杀数
- 统计全服怪物击杀总数用于触发世界事件
- BOSS战阶段状态持久化（防止服务器重启中断）

### 4. 性能优化

- 怪物数量上限：基于区块活跃玩家数动态调整
- 视野外怪物：降低AI计算频率
- 大量粒子效果：距离衰减，超出50格不渲染

---

## 五、平衡性调整预案

### 1. 难度过高的应对

- 增加“新手保护期”：前3天怪物攻击力-30%
- 提供临时BUFF道具：老守卫布雷恩出售“驱暗粉尘”（暂时降低怪物生成）
- 动态调整：如果某个怪物击杀玩家次数过多，自动降低其生命值5%

### 2. 难度过低的应对

- 引入“侵蚀度”机制：玩家击杀过多怪物会吸引更强大的“复仇者”精英怪
- 周期性强化：每周一服务器重启后，所有怪物基础属性+5%
- 事件触发：当玩家群体过强时，提前触发小型入侵事件

### 3. 团队协作鼓励

- 组队奖励：队伍击杀怪物经验+20%
- 职业配合加成：
  - 匠师在场：全队对构造体（BOSS）伤害+10%
  - 元术士在场：能量类怪物伤害-15%
  - 狩魂者在场：野兽类怪物掉落率+25%

---

## 六、测试计划

### 第一阶段：基础功能测试（开发期）

- 怪物生成条件验证
- 基础属性平衡测试
- AI行为逻辑检查

### 第二阶段：玩法测试（上线前1周）

- 小规模玩家测试（10-20人）
- 各职业对抗怪物体验
- BOSS战流程完整演练

### 第三阶段：压力测试（开服前3天）

- 模拟满负载（50+玩家同时在线）
- 长时间运行稳定性
- 内存和CPU使用监控

### 第四阶段：热修复准备

- 准备紧急调整命令：可临时修改怪物属性
- 备用简化版BOSS战脚本（如性能不足）
- 怪物禁用开关（极端情况）

---

**备注**：此怪物策划需与服务器插件开发团队密切配合，根据实际技术实现能力和玩家反馈进行迭代调整。建议第一周内每日收集玩家对战数据，每周进行一次系统性平衡调整。
